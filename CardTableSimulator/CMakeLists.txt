add_executable (CardTableSimulator)

# If we are building for emscripten.
if(EMSCRIPTEN)

target_include_directories(
	CardTableSimulator

	PUBLIC 

	${CMAKE_CURRENT_LIST_DIR}/include 
	${LUA_INCLUDE_DIR}
	${CMAKE_CURRENT_LIST_DIR}/external
)

target_link_libraries(
	CardTableSimulator

	PRIVATE 

	# Thank goodness these linking expressions were generated by vcpkg. :$
	$<TARGET_NAME_IF_EXISTS:SDL2::SDL2main>
	$<IF:$<TARGET_EXISTS:SDL2::SDL2>,SDL2::SDL2,SDL2::SDL2-static>
	$<IF:$<TARGET_EXISTS:SDL2_image::SDL2_image>,SDL2_image::SDL2_image,SDL2_image::SDL2_image-static>
	$<IF:$<TARGET_EXISTS:SDL2_mixer::SDL2_mixer>,SDL2_mixer::SDL2_mixer,SDL2_mixer::SDL2_mixer-static>
	$<IF:$<TARGET_EXISTS:SDL2_ttf::SDL2_ttf>,SDL2_ttf::SDL2_ttf,SDL2_ttf::SDL2_ttf-static>
	${LUA_LIBRARIES}

)

else()

target_compile_definitions(
	CardTableSimulator

	PRIVATE 

	CTS_ASSETS="$ENV{Assets_Dir}"
	CTS_CONFIG="$ENV{Config_Dir}"
)

target_include_directories(
	CardTableSimulator

	PUBLIC 

	${CMAKE_CURRENT_LIST_DIR}/include 
	${LUA_INCLUDE_DIR}
)

target_link_libraries(
	CardTableSimulator

	PRIVATE 

	# Thank goodness these linking expressions were generated by vcpkg. :$
	$<TARGET_NAME_IF_EXISTS:SDL2::SDL2main>
	$<IF:$<TARGET_EXISTS:SDL2::SDL2>,SDL2::SDL2,SDL2::SDL2-static>
	$<IF:$<TARGET_EXISTS:SDL2_image::SDL2_image>,SDL2_image::SDL2_image,SDL2_image::SDL2_image-static>
	$<IF:$<TARGET_EXISTS:SDL2_mixer::SDL2_mixer>,SDL2_mixer::SDL2_mixer,SDL2_mixer::SDL2_mixer-static>
	$<IF:$<TARGET_EXISTS:SDL2_ttf::SDL2_ttf>,SDL2_ttf::SDL2_ttf,SDL2_ttf::SDL2_ttf-static>
	${LUA_LIBRARIES}
	sol2
	nuklear
)

endif(EMSCRIPTEN)

target_sources(
	CardTableSimulator

	PUBLIC 

	${CMAKE_CURRENT_LIST_DIR}/include/ErrCodes.hpp

	${CMAKE_CURRENT_LIST_DIR}/include/SDLApp.hpp
	${CMAKE_CURRENT_LIST_DIR}/include/Texture.hpp
	${CMAKE_CURRENT_LIST_DIR}/include/Font.hpp
	${CMAKE_CURRENT_LIST_DIR}/include/Input.hpp
	${CMAKE_CURRENT_LIST_DIR}/include/Component.hpp

	${CMAKE_CURRENT_LIST_DIR}/include/scenes/Scene.hpp
	${CMAKE_CURRENT_LIST_DIR}/include/scenes/MenuScene.hpp

	${CMAKE_CURRENT_LIST_DIR}/include/systems/UI.hpp

	PRIVATE 

	${CMAKE_CURRENT_LIST_DIR}/src/main.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/SDLApp.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/Texture.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/Font.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/Input.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/Component.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/nuklear.cpp

	${CMAKE_CURRENT_LIST_DIR}/src/scenes/Scene.cpp
	${CMAKE_CURRENT_LIST_DIR}/src/scenes/MenuScene.cpp

	${CMAKE_CURRENT_LIST_DIR}/src/systems/UI.cpp
)
